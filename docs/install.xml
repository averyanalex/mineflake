<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE article>
<article
  xmlns="http://docbook.org/ns/docbook" version="5.0"
  xmlns:xlink="http://www.w3.org/1999/xlink" >
  <info>
    <title></title>
  </info>
  <section xml:id="installing-mineflake">
    <title>Installing mineflake</title>
    <section xml:id="add-a-flake">
      <title>Add a flake</title>
      <para>
        Mineflake can only be installed via flakes, so you must
        <link xlink:href="https://nixos.wiki/wiki/Flakes">enable
        them</link> in your nix config. After you have enabled it, add a
        new input.
      </para>
      <programlisting language="bash">
{
  description = &quot;Your NixOS config&quot;;

  inputs = {
    nixpkgs.url = &quot;github:nixos/nixpkgs/nixos-22.05&quot;;

    mineflake.url = &quot;git+https://git.frsqr.xyz/firesquare/mineflake?ref=main&quot;;
    mineflake.inputs.nixpkgs.follows = &quot;nixpkgs&quot;;
  };

  outputs = { self, nixpkgs, mineflake }:
    {
      nixosConfigurations = {
        example = nixpkgs.lib.nixosSystem {
          system = &quot;x86_64-linux&quot;;
          modules = [
            ./example.nix
          ];
        };
      };
    };
}
</programlisting>
    </section>
    <section xml:id="update-your-nixossystem">
      <title>Update your nixosSystem</title>
      <para>
        Add a new module and overlay nixpkgs to your nixosSystem.
      </para>
      <programlisting language="bash">
{
  description = &quot;Your NixOS config&quot;;

  inputs = {
    nixpkgs.url = &quot;github:nixos/nixpkgs/nixos-22.05&quot;;

    mineflake.url = &quot;git+https://git.frsqr.xyz/firesquare/mineflake?ref=main&quot;;
    mineflake.inputs.nixpkgs.follows = &quot;nixpkgs&quot;;
  };

  outputs = { self, nixpkgs, mineflake }:
    {
      nixosConfigurations = {
        example = nixpkgs.lib.nixosSystem {
          system = &quot;x86_64-linux&quot;;
          modules = [
            ./example.nix
            mineflake.nixosModules.default
            {
              nixpkgs.overlays = [ mineflake.overlays.default ];
            }
          ];
        };
      };
    };
}
</programlisting>
      <para>
        Mineflake installed!
      </para>
    </section>
  </section>
</article>
